<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shubhzone</title>

    <style>
        :root {
            --dark-bg: #121212;
            --primary-text: #ffffff;
            --secondary-text: #b3b3b3;
            --card-bg: #1e1e1e;
            --accent-gradient: linear-gradient(90deg, #ff416c, #ff4b2b);
            --placeholder-bg: #2a2a2a;
            --modal-bg: rgba(0, 0, 0, 0.8);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; background-color: var(--dark-bg); color: var(--primary-text); overflow-x: hidden; }
        .page { padding: 20px 15px 80px 15px; display: none; min-height: calc(100vh - 65px); overflow-y: auto; }
        .page.active { display: block; }
        h2 { color: var(--primary-text); margin-bottom: 20px; }
        .button { width: 100%; padding: 15px; border: none; border-radius: 10px; background: var(--accent-gradient); color: white; font-size: 18px; font-weight: bold; cursor: pointer; text-align: center; }

        /* ======== HOMEPAGE: PLAYLIST LAYOUT (NEW) ======== */
        #homePage { padding-top: 20px; }
        .playlist-row { margin-bottom: 25px; }
        .playlist-row h3 { font-size: 20px; margin-bottom: 15px; padding-left: 5px; }
        .video-carousel {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 15px;
            padding-bottom: 15px; /* For scrollbar space */
        }
        .video-carousel::-webkit-scrollbar { display: none; } /* Hide scrollbar */
        .video-card-in-carousel {
            flex: 0 0 65%; /* Each card takes 65% of screen width */
            max-width: 250px;
            scroll-snap-align: start;
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
        }
        .video-card-in-carousel .thumbnail {
            width: 100%;
            aspect-ratio: 16 / 9;
            background-color: var(--placeholder-bg);
            background-size: cover;
            background-position: center;
        }
        .video-card-in-carousel .info { padding: 10px; }
        .video-card-in-carousel .info p { font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* ======== UPLOAD PAGE (MODIFIED) ======== */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; color: var(--secondary-text); margin-bottom: 8px; font-size: 14px; }
        .form-group input[type="text"], .form-group select { width: 100%; background-color: var(--card-bg); border: 1px solid #444; border-radius: 8px; padding: 12px; color: var(--primary-text); font-size: 16px; -webkit-appearance: none; appearance: none; }
        .playlist-selection { display: flex; gap: 10px; align-items: center; }
        .playlist-selection select { flex-grow: 1; }
        .playlist-selection .add-new-btn { padding: 12px; font-size: 24px; line-height: 1; border-radius: 8px; background-color: var(--card-bg); border: 1px solid #444; color: var(--primary-text); }
        .upload-container { display: flex; gap: 15px; margin-bottom: 20px; }
        .file-uploader-card { flex: 1; border: 2px dashed #444; border-radius: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: var(--placeholder-bg); aspect-ratio: 16 / 9; cursor: pointer; overflow: hidden; position: relative; }
        .file-uploader-card .upload-text { text-align: center; color: var(--secondary-text); }
        .file-uploader-card svg { width: 30%; max-width: 48px; margin-bottom: 10px; }
        .file-uploader-card .preview-video, .file-uploader-card .preview-image { position: absolute; width: 100%; height: 100%; object-fit: cover; display: none; }
        
        /* ======== PROFILE PAGE (RESTORED) ======== */
        .file-upload-button { background-color: var(--card-bg); border: 1px solid #444; border-radius: 8px; padding: 12px; text-align: center; cursor: pointer; color: var(--secondary-text); margin-top: 5px; }
        .file-upload-button:hover { background-color: #333; }
        .profile-pic-preview { width: 100px; height: 100px; border-radius: 50%; background-color: var(--placeholder-bg); margin-bottom: 10px; object-fit: cover; }

        /* ======== MODAL FOR NEW PLAYLIST ======== */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--modal-bg); z-index: 250; display: none; justify-content: center; align-items: center; padding: 15px; }
        .modal-content { background-color: var(--card-bg); padding: 25px; border-radius: 15px; width: 100%; max-width: 400px; position: relative; }
        .modal-content h3 { margin-top: 0; margin-bottom: 20px; }
        .modal .close-btn { position: absolute; top: 10px; right: 15px; font-size: 28px; color: var(--secondary-text); cursor: pointer; }

        /* ======== BOTTOM NAVIGATION (SIMPLIFIED) ======== */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background-color: var(--transparent-black); backdrop-filter: blur(10px); display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid rgba(255, 255, 255, 0.1); z-index: 100; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--secondary-text); cursor: pointer; }
        .nav-item.active { color: var(--primary-text); }
        .nav-item.upload-plus { position: relative; top: -15px; }
        .nav-icon { width: 28px; height: 28px; }
        .nav-icon.upload-icon { width: 50px; height: 50px; background: var(--accent-gradient); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; }
        .nav-label { font-size: 10px; margin-top: 2px; }

        /* ======== VIDEO PLAYER (Unchanged) ======== */
        #videoPlayerOverlay { /* Kept as is from previous version */ }
    </style>
</head>
<body>

    <!-- ======== HOMEPAGE - NOW PLAYLIST BASED ======== -->
    <div id="homePage" class="page active">
        <div id="playlist-container">
            <!-- Playlist rows will be dynamically inserted here by JavaScript -->
        </div>
        <p id="home-status-message" style="text-align: center; color: var(--secondary-text); display: none;"></p>
    </div>

    <!-- ======== UPLOAD PAGE - MODIFIED ======== -->
    <div id="uploadPage" class="page">
        <h2>Upload Video</h2>
        <div class="form-group">
            <label for="videoTitle">Video Title</label>
            <input type="text" id="videoTitle" placeholder="Enter a catchy title">
        </div>
        
        <div class="form-group">
            <label for="playlistSelect">Add to Playlist</label>
            <div class="playlist-selection">
                <select id="playlistSelect"></select>
                <button class="add-new-btn" onclick="openPlaylistModal()">+</button>
            </div>
        </div>

        <div class="upload-container">
            <div class="file-uploader-card" onclick="document.getElementById('videoFileInput').click()">
                <div class="upload-text">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>
                    <p>Select Video</p>
                </div>
                <video class="preview-video" muted></video>
            </div>
            <div class="file-uploader-card" onclick="document.getElementById('thumbnailInput').click()">
                <div class="upload-text">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M21.58,16.09L19.83,17.84L18.37,16.38L15.12,19.63L12.87,17.38L9.62,20.63L6.37,17.38L3.12,20.63L1.37,18.88L10.37,9.88L12.12,11.63L15.37,8.38L18.62,11.63L21.58,8.66V16.09H21.58M22,4H14L12,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H22A2,2 0 0,0 24,20V6A2,2 0 0,0 22,4Z" /></svg>
                    <p>Select Thumbnail</p>
                </div>
                <img class="preview-image" alt="Thumbnail Preview"/>
            </div>
        </div>
        <input type="file" id="videoFileInput" style="display: none;" accept="video/*">
        <input type="file" id="thumbnailInput" style="display: none;" accept="image/*">
        
        <div class="button" onclick="uploadVideo()">✅ Upload Video</div>
    </div>
    
    <!-- ======== PROFILE PAGE - RESTORED & DETAILED ======== -->
    <div id="infoSubmissionPage" class="page">
        <h2>Submit Your Information</h2>
        <p style="color: var(--secondary-text); margin-bottom: 25px;">This information is required for verification.</p>
        
        <div class="form-group">
            <label for="fullName">Full Name</label>
            <input type="text" id="fullName" placeholder="Your full name as on ID">
        </div>
        <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" placeholder="Your primary email">
        </div>
        <div class="form-group">
            <label for="address">Full Address</label>
            <textarea id="address" placeholder="Your full residential address" style="min-height: 80px;"></textarea>
        </div>
        <div class="form-group">
            <label>Your Photos (2 required)</label>
            <div class="file-upload-button" onclick="document.getElementById('photo1').click()">Select Photo 1</div>
            <div class="file-upload-button" onclick="document.getElementById('photo2').click()" style="margin-top:10px;">Select Photo 2</div>
            <input type="file" id="photo1" style="display:none;" accept="image/*">
            <input type="file" id="photo2" style="display:none;" accept="image/*">
        </div>
         <div class="form-group">
            <label>Government ID Proof (Aadhaar, etc.)</label>
            <div class="file-upload-button" onclick="document.getElementById('govId').click()">Select ID Proof</div>
            <input type="file" id="govId" style="display:none;" accept="image/*,application/pdf">
        </div>

        <div class="button" onclick="submitForApproval()">Submit for Approval</div>
    </div>

    <!-- This is the page shown after approval. Keep it simple for now. -->
    <div id="userDashboardPage" class="page">
        <h2>My Profile</h2>
        <p>Your profile is active.</p>
    </div>

    <!-- ======== BOTTOM NAVIGATION BAR - SIMPLIFIED ======== -->
    <nav class="bottom-nav">
        <div id="navHome" class="nav-item active" onclick="showPage('homePage')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" /></svg>
            <span class="nav-label">Home</span>
        </div>
        <div class="nav-item upload-plus" onclick="showPage('uploadPage')">
            <div class="nav-icon upload-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg></div>
        </div>
        <div id="navProfile" class="nav-item" onclick="handleProfileClick()">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" /></svg>
            <span class="nav-label">Profile</span>
        </div>
    </nav>

    <!-- ======== MODAL FOR CREATING A NEW PLAYLIST ======== -->
    <div id="newPlaylistModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closePlaylistModal()">×</span>
            <h3>Create New Playlist</h3>
            <div class="form-group">
                <label for="newPlaylistName">Playlist Name</label>
                <input type="text" id="newPlaylistName" placeholder="e.g., Devotional Songs">
            </div>
            <div class="form-group">
                <label>Playlist Thumbnail (16:9)</label>
                <div class="file-upload-button" onclick="document.getElementById('newPlaylistThumb').click()">Select Thumbnail</div>
                <input type="file" id="newPlaylistThumb" style="display:none" accept="image/*">
            </div>
            <div class="button" onclick="handleCreatePlaylist()">Create Playlist</div>
        </div>
    </div>

    <!-- Video Player Overlay (Unchanged from previous version) -->
    <div id="videoPlayerOverlay">
        <!-- ... Player HTML goes here. It is kept as is. ... -->
    </div>

    <script>
        // ======== APP STATE & DUMMY DATA ========
        let isUserApproved = false;
        // For demonstration, we'll use dummy data until backend is connected.
        let playlists = [
            { id: 1, name: 'Devotion', thumbnail: 'https://i.ibb.co/N2LH7hHx/Leonardo-Phoenix-10-A-powerful-ancient-king-sitting-on-a-grand-0.jpg' },
            { id: 2, name: 'Horror', thumbnail: 'https://i.ibb.co/N2LH7hHx/Leonardo-Phoenix-10-A-powerful-ancient-king-sitting-on-a-grand-0.jpg' },
            { id: 3, name: 'Food Recipes', thumbnail: 'https://i.ibb.co/N2LH7hHx/Leonardo-Phoenix-10-A-powerful-ancient-king-sitting-on-a-grand-0.jpg' }
        ];
        const videos = [
            { id: 'v1', title: 'Morning Aarti', playlistId: 1, thumb: 'https://picsum.photos/seed/v1/480/270' },
            { id: 'v2', title: 'Top 10 Bhajans', playlistId: 1, thumb: 'https://picsum.photos/seed/v2/480/270' },
            { id: 'v3', title: 'The Conjuring Story', playlistId: 2, thumb: 'https://picsum.photos/seed/v3/480/270' },
            { id: 'v4', title: 'Paneer Butter Masala', playlistId: 3, thumb: 'https://picsum.photos/seed/v4/480/270' }
        ];

        // ======== PAGE NAVIGATION ========
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId)?.classList.add('active');
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if (pageId === 'homePage') document.getElementById('navHome').classList.add('active');
            if (pageId.includes('Submission') || pageId.includes('Dashboard')) document.getElementById('navProfile').classList.add('active');
        }

        // ======== HOMEPAGE LOGIC (NEW) ========
        function populateHomePage() {
            const container = document.getElementById('playlist-container');
            const statusMsg = document.getElementById('home-status-message');
            container.innerHTML = '';

            if (playlists.length === 0) {
                statusMsg.textContent = 'No playlists found. Create one from the upload page!';
                statusMsg.style.display = 'block';
                return;
            }
            statusMsg.style.display = 'none';

            playlists.forEach(playlist => {
                const playlistVideos = videos.filter(v => v.playlistId === playlist.id);
                if (playlistVideos.length === 0) return; // Don't show empty playlists

                const row = document.createElement('div');
                row.className = 'playlist-row';
                row.innerHTML = `
                    <h3>${playlist.name}</h3>
                    <div class="video-carousel">
                        ${playlistVideos.map(video => `
                            <div class="video-card-in-carousel" onclick="playVideo('${video.id}', '${video.title}')">
                                <div class="thumbnail" style="background-image: url('${video.thumb}')"></div>
                                <div class="info"><p>${video.title}</p></div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(row);
            });
        }
        
        // ======== UPLOAD PAGE & PLAYLIST MODAL LOGIC ========
        const playlistSelect = document.getElementById('playlistSelect');
        const newPlaylistModal = document.getElementById('newPlaylistModal');

        function populatePlaylistDropdown() {
            playlistSelect.innerHTML = '';
            playlists.forEach(p => {
                const option = document.createElement('option');
                option.value = p.id;
                option.textContent = p.name;
                playlistSelect.appendChild(option);
            });
        }

        function openPlaylistModal() { newPlaylistModal.style.display = 'flex'; }
        function closePlaylistModal() { newPlaylistModal.style.display = 'none'; }
        
        function handleCreatePlaylist() {
            const nameInput = document.getElementById('newPlaylistName');
            const thumbInput = document.getElementById('newPlaylistThumb');
            if (!nameInput.value || thumbInput.files.length === 0) {
                alert('Please provide a playlist name and a thumbnail.');
                return;
            }
            // In a real app, you would upload the thumbnail and save to DB.
            // Here, we just simulate it.
            const newPlaylist = {
                id: Date.now(), // simple unique ID
                name: nameInput.value,
                thumbnail: URL.createObjectURL(thumbInput.files[0]) // Temporary URL for demo
            };
            playlists.push(newPlaylist);
            populatePlaylistDropdown(); // Refresh dropdown
            alert(`Playlist "${newPlaylist.name}" created!`);
            closePlaylistModal();
            nameInput.value = '';
            thumbInput.value = '';
        }

        function uploadVideo() {
            const videoFile = document.getElementById('videoFileInput').files[0];
            const thumbFile = document.getElementById('thumbnailInput').files[0];
            const title = document.getElementById('videoTitle').value;
            const selectedPlaylistId = playlistSelect.value;
            
            if (!videoFile || !thumbFile || !title || !selectedPlaylistId) {
                alert('Please fill all fields: Title, Playlist, Video, and Thumbnail.');
                return;
            }
            // Here you would start the actual upload process to the backend.
            alert(`Uploading "${title}" to playlist ID ${selectedPlaylistId}.`);
            // After successful upload, you would likely go back to the home page.
            showPage('homePage');
            populateHomePage(); // Refresh home page to show new video
        }

        // ======== PROFILE PAGE LOGIC (RESTORED) ========
        function handleProfileClick() {
            showPage(isUserApproved ? 'userDashboardPage' : 'infoSubmissionPage');
        }

        function submitForApproval() {
            // Here, you would collect all form data and send to backend.
            alert('Your information has been submitted for verification.');
            // For demo purposes, we'll approve immediately after 2 seconds.
            setTimeout(() => {
                isUserApproved = true;
                alert('Your profile has been approved!');
                handleProfileClick();
            }, 2000);
        }

        // ======== VIDEO PLAYER LOGIC (Unchanged) ========
        function playVideo(videoId, videoTitle) {
            console.log(`Playing video with ID: ${videoId} and title: ${videoTitle}`);
            // The professional player logic from the previous version goes here.
            // It would open the overlay and fetch the real video URL from the backend.
            alert(`Imagine a professional player opening for "${videoTitle}" now.`);
        }
        
        // ======== INITIALIZATION ========
        document.addEventListener('DOMContentLoaded', () => {
            showPage('homePage');
            populateHomePage();
            populatePlaylistDropdown();
        });
    </script>
</body>
</html>
